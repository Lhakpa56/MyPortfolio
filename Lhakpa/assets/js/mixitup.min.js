const buttons = document.querySelectorAll('.category__btn');
const projects = document.querySelectorAll('.project__item');

buttons.forEach(btn => {
  btn.addEventListener('click', () => {
    // Remove active class on all buttons
    buttons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    const filter = btn.getAttribute('data-filter');

    if (filter === 'all') {
      // Show first project of each category only
      const shownCategories = new Set();

      projects.forEach(project => {
        const category = project.getAttribute('data-category');
        if (!shownCategories.has(category)) {
          project.style.display = 'block';
          project.classList.add('active');
          shownCategories.add(category);
        } else {
          project.style.display = 'none';
          project.classList.remove('active');
        }
      });
    } else {
      // Show only first project of the selected category
      let shownOne = false;
      projects.forEach(project => {
        if (project.getAttribute('data-category') === filter && !shownOne) {
          project.style.display = 'block';
          project.classList.add('active');
          shownOne = true;
        } else {
          project.style.display = 'none';
          project.classList.remove('active');
        }
      });
    }
  });
});

// On page load, simulate clicking "All" to show initial projects
window.addEventListener('load', () => {
  document.querySelector('.category__btn.active').click();
});
